<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>♥ Lovely Pleasure Loop V3.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            display: flex; justify-content: center; align-items: center; padding: 20px;
            color: #333;
        }
        .container { max-width: 800px; width: 100%; background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        header {
            text-align: center; margin-bottom: 30px;
            background: linear-gradient(45deg, #ff69b4, #ff1493); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            font-size: 2em; font-weight: 600; letter-spacing: 5px;
        }
        header::before { content: '♥ '; font-size: 1.2em; }
        header::after { content: ' ♥'; font-size: 1.2em; }
        .subheader { color: #ff69b4; font-size: 1.1em; margin-top: 10px; }
        #settings { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-bottom: 30px; }
        input[type="number"] { padding: 12px 15px; border: 2px solid #ffb6c1; border-radius: 25px; font-size: 1em; width: 120px; text-align: center; transition: all 0.3s; }
        input:focus { outline: none; border-color: #ff69b4; box-shadow: 0 0 15px rgba(255,105,180,0.5); transform: scale(1.05); }
        button {
            padding: 12px 25px; border: none; border-radius: 25px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s; position: relative; overflow: hidden;
            background: linear-gradient(45deg, #ff69b4, #ff1493); color: white; box-shadow: 0 5px 15px rgba(255,105,180,0.4);
        }
        button:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(255,105,180,0.6); }
        button:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        #status {
            background: linear-gradient(135deg, #fff0f5, #ffe4e1); border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.05);
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 1.1em;
        }
        .status-item { text-align: center; }
        .status-value { font-weight: 600; color: #ff1493; font-size: 1.3em; }
        #progress { height: 10px; background: #ffe4e1; border-radius: 5px; overflow: hidden; margin-top: 10px; }
        #progress-bar { height: 100%; background: linear-gradient(90deg, #ff69b4, #ff1493); width: 0%; transition: width 0.5s ease; }
        #log {
            height: 300px; overflow-y: auto; background: white; border-radius: 15px; padding: 20px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.05);
            font-family: monospace; line-height: 1.5; border: 2px solid #ffb6c1;
        }
        .log-entry { margin-bottom: 5px; padding: 5px; border-radius: 8px; animation: fadeIn 0.5s; }
        .insert { background: #ffebee; color: #c62828; border-left: 4px solid #f44336; }
        .withdraw { background: #e1f5fe; color: #0277bd; border-left: 4px solid #2196f3; }
        .error { background: #fff3e0; color: #ef6c00; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .shake { animation: shake 0.5s; }
        .hidden { display: none; }
        footer { text-align: center; margin-top: 20px; color: #ff69b4; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <header>LOVELY PLEASURE LOOP V3.0</header>
        <div class="subheader">Toy Anal ysis & Slow Freq. ♥</div>
        
        <section id="settings">
            <label>玩具长度 (cm ≤150):</label>
            <input type="number" id="toyLength" min="0" max="150" step="0.1" value="10">
            <label>玩具直径 (cm ≤5):</label>
            <input type="number" id="toyDiameter" min="0" max="5" step="0.1" value="2">
            <label>总次数 (默认10):</label>
            <input type="number" id="totalCount" min="2" value="10">
            <button onclick="calculateFrequency()">计算频率</button>
            <button id="startBtn" onclick="startSession()" disabled>开始会话 ♥</button>
            <button id="stopBtn" onclick="stopSession()" class="hidden">停止</button>
        </section>
        
        <div id="frequencyDisplay" class="hidden status-item">
            <div>温柔频率: <span id="actionDelay" class="status-value"></span> 秒/次</div>
        </div>
        
        <section id="status" class="hidden">
            <div class="status-item">
                <div>时间</div>
                <div id="elapsedTime" class="status-value">00:00:00</div>
            </div>
            <div class="status-item">
                <div>进度</div>
                <div id="cycleProgress" class="status-value">0/0</div>
            </div>
            <div class="status-item">
                <div>插入次数</div>
                <div id="insertions" class="status-value">0</div>
            </div>
            <div id="progress-container" class="status-item">
                <div>进度条</div>
                <div id="progress">
                    <div id="progress-bar"></div>
                </div>
            </div>
        </section>
        
        <div id="log"></div>
        
        <footer>安全第一，享受温柔的快感 ♥</footer>
    </div>

    <script>
        const MAX_DEPTH = 150.0;
        const MAX_DIAMETER = 5.0;
        const DEFAULT_COUNT = 10;
        let toyLength, toyDiameter, totalCount, actionDelay = 0;
        let cycleCount = 0, totalInsertions = 0, sessionStartTime = 0;
        let isRunning = false;
        const logEl = document.getElementById('log');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');

        function shakeInput(input) {
            input.classList.add('shake');
            setTimeout(() => input.classList.remove('shake'), 500);
        }

        function addLog(message, className = '') {
            const entry = document.createElement('div');
            entry.className = `log-entry ${className}`;
            entry.textContent = `[${cycleCount}/${totalCount}] ${message}`;
            logEl.appendChild(entry);
            logEl.scrollTop = logEl.scrollHeight;
        }

        function updateStatus() {
            const elapsed = Math.floor((Date.now() - sessionStartTime) / 1000);
            const h = Math.floor(elapsed / 3600).toString().padStart(2, '0');
            const m = Math.floor((elapsed % 3600) / 3600 * 60).toString().padStart(2, '0');
            const s = (elapsed % 60).toString().padStart(2, '0');
            document.getElementById('elapsedTime').textContent = `${h}:${m}:${s}`;
            document.getElementById('cycleProgress').textContent = `${cycleCount}/${totalCount}`;
            document.getElementById('insertions').textContent = totalInsertions;
            const progress = (cycleCount / totalCount) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function calculateFrequency() {
            toyLength = parseFloat(document.getElementById('toyLength').value);
            toyDiameter = parseFloat(document.getElementById('toyDiameter').value);
            totalCountInput = parseInt(document.getElementById('totalCount').value) || DEFAULT_COUNT;

            if (isNaN(toyLength) || toyLength <= 0 || toyLength > MAX_DEPTH) {
                shakeInput(document.getElementById('toyLength'));
                addLog('输入无效！长度需为0-150cm数字。', 'error');
                return;
            }
            if (isNaN(toyDiameter) || toyDiameter <= 0 || toyDiameter > MAX_DIAMETER) {
                shakeInput(document.getElementById('toyDiameter'));
                addLog('输入无效！直径需为0-5cm数字。', 'error');
                return;
            }
            totalCount = totalCountInput % 2 === 1 ? totalCountInput + 1 : totalCountInput;
            actionDelay = (toyLength / 50) + (toyDiameter / 5) + 0.5;
            document.getElementById('actionDelay').textContent = actionDelay.toFixed(4);
            document.getElementById('frequencyDisplay').classList.remove('hidden');
            startBtn.disabled = false;
            addLog(`玩具尺寸：${toyLength}cm (长) ${toyDiameter}cm (粗)`);
            addLog(`“最爽”温柔频率：${actionDelay.toFixed(4)} 秒/次动作 (更慢，更充分)`);
        }

        async function pleasureLoop() {
            while (cycleCount < totalCount && isRunning) {
                cycleCount++;
                if (cycleCount % 2 === 1) {
                    totalInsertions++;
                    addLog(`♥ >>>>>> ${toyLength}cm 完全插入肛门！ 温柔的快感... (第 ${totalInsertions} 次)`, 'insert');
                } else {
                    addLog(`♥ <<<<<< ${toyLength}cm 完全拔出。 期待下一次的温柔。`, 'withdraw');
                }
                updateStatus();
                await new Promise(resolve => setTimeout(resolve, actionDelay * 1000));
            }
            if (isRunning) sessionEnd();
        }

        function startSession() {
            if (actionDelay === 0) {
                addLog('请先计算频率！', 'error');
                return;
            }
            cycleCount = 0;
            totalInsertions = 0;
            sessionStartTime = Date.now();
            isRunning = true;
            logEl.innerHTML = '';
            document.getElementById('status').classList.remove('hidden');
            startBtn.classList.add('hidden');
            stopBtn.classList.remove('hidden');
            updateStatus();
            addLog('会话开始 ♥');
            pleasureLoop();
        }

        function stopSession() {
            isRunning = false;
            addLog('会话已停止。', 'error');
            startBtn.classList.remove('hidden');
            stopBtn.classList.add('hidden');
            updateStatus();
        }

        function sessionEnd() {
            const duration = Math.floor((Date.now() - sessionStartTime) / 1000);
            const h = Math.floor(duration / 3600).toString().padStart(2, '0');
            const m = Math.floor((duration % 3600) / 3600 * 60).toString().padStart(2, '0');
            const s = (duration % 60).toString().padStart(2, '0');
            addLog(`恭喜！您的 ${totalInsertions} 次温柔插入已完成！ ♥♥♥`);
            addLog(`总时长：${h}:${m}:${s}`);
            isRunning = false;
            startBtn.classList.remove('hidden');
            stopBtn.classList.add('hidden');
        }
    </script>
</body>
</html>
