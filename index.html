<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸“ä¸šåšå®¢ç¼–è¾‘å™¨ - ç±»WordPressç•Œé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: #f0f0f1;
            color: #1d2327;
        }

        .header {
            background: #fff;
            border-bottom: 1px solid #c3c4c7;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
            color: #1d2327;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            font-weight: 500;
        }

        .btn-primary {
            background: #2271b1;
            color: #fff;
        }

        .btn-primary:hover {
            background: #135e96;
        }

        .btn-secondary {
            background: #f6f7f7;
            color: #2c3338;
            border: 1px solid #c3c4c7;
        }

        .btn-secondary:hover {
            background: #e9eaea;
        }

        .container {
            display: flex;
            height: calc(100vh - 61px);
        }

        .sidebar {
            width: 280px;
            background: #fff;
            border-right: 1px solid #c3c4c7;
            overflow-y: auto;
            padding: 20px;
        }

        .sidebar-section {
            margin-bottom: 24px;
        }

        .sidebar-section h3 {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            color: #646970;
            margin-bottom: 12px;
        }

        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .editor-wrapper {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 30px;
        }

        .title-input {
            width: 100%;
            border: none;
            font-size: 32px;
            font-weight: 600;
            padding: 12px 0;
            margin-bottom: 20px;
            outline: none;
            color: #1d2327;
        }

        .title-input::placeholder {
            color: #a7aaad;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 12px;
            background: #f9f9f9;
            border: 1px solid #dcdcde;
            border-radius: 4px;
            margin-bottom: 16px;
        }

        .toolbar-group {
            display: flex;
            gap: 4px;
            padding-right: 8px;
            border-right: 1px solid #dcdcde;
        }

        .toolbar-group:last-child {
            border-right: none;
        }

        .toolbar-btn {
            padding: 6px 10px;
            background: #fff;
            border: 1px solid #c3c4c7;
            border-radius: 3px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            min-width: 32px;
            text-align: center;
        }

        .toolbar-btn:hover {
            background: #f0f0f1;
            border-color: #8c8f94;
        }

        .toolbar-btn.active {
            background: #2271b1;
            color: #fff;
            border-color: #2271b1;
        }

        .editor-content {
            min-height: 400px;
            padding: 20px;
            border: 1px solid #dcdcde;
            border-radius: 4px;
            outline: none;
            line-height: 1.8;
            font-size: 16px;
        }

        .editor-content:focus {
            border-color: #2271b1;
            box-shadow: 0 0 0 1px #2271b1;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-group label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #1d2327;
            margin-bottom: 6px;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #c3c4c7;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #2271b1;
            box-shadow: 0 0 0 1px #2271b1;
        }

        .color-picker-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-picker {
            width: 50px;
            height: 32px;
            border: 1px solid #c3c4c7;
            border-radius: 4px;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            font-size: 20px;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #646970;
        }

        .settings-grid {
            display: grid;
            gap: 16px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
        }

        .sidebar-btn {
            width: 100%;
            padding: 10px;
            margin-bottom: 8px;
            background: #f0f0f1;
            border: 1px solid #c3c4c7;
            border-radius: 4px;
            cursor: pointer;
            text-align: left;
            font-size: 14px;
            transition: all 0.2s;
        }

        .sidebar-btn:hover {
            background: #e9eaea;
        }

        .preview-mode {
            background: #f9f9f9;
            padding: 40px;
            border-radius: 4px;
            margin-top: 20px;
        }

        .preview-mode h1 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #1d2327;
        }

        .style-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .style-option {
            padding: 6px 12px;
            background: #fff;
            border: 2px solid #c3c4c7;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .style-option:hover {
            border-color: #2271b1;
        }

        .style-option.active {
            background: #2271b1;
            color: #fff;
            border-color: #2271b1;
        }

        .media-insert-area {
            background: #f9f9f9;
            border: 2px dashed #c3c4c7;
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            margin-top: 12px;
        }

        .tab-group {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
            border-bottom: 1px solid #dcdcde;
        }

        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #646970;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            color: #2271b1;
        }

        .tab-btn.active {
            color: #2271b1;
            border-bottom-color: #2271b1;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #00a32a;
            color: #fff;
            padding: 16px 24px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 2000;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification.show {
            display: block;
        }

        .code-editor {
            font-family: 'Courier New', monospace;
            background: #282c34;
            color: #abb2bf;
            padding: 16px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -280px;
                height: 100vh;
                z-index: 999;
                transition: left 0.3s;
            }

            .sidebar.mobile-open {
                left: 0;
            }

            .main-content {
                padding: 15px;
            }

            .editor-wrapper {
                padding: 20px;
            }

            .toolbar {
                gap: 4px;
            }
        }

        .range-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .range-group input[type="range"] {
            flex: 1;
        }

        .range-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ–Šï¸ ä¸“ä¸šåšå®¢ç¼–è¾‘å™¨</h1>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="togglePreview()">ğŸ‘ï¸ é¢„è§ˆ</button>
            <button class="btn btn-secondary" onclick="saveDraft()">ğŸ’¾ ä¿å­˜è‰ç¨¿</button>
            <button class="btn btn-primary" onclick="exportHTML()">ğŸ“¥ å¯¼å‡ºHTML</button>
        </div>
    </div>

    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3>ğŸ“ æ–‡æ¡£è®¾ç½®</h3>
                <button class="sidebar-btn" onclick="openModal('settings')">âš™ï¸ å…¨å±€è®¾ç½®</button>
                <button class="sidebar-btn" onclick="openModal('seo')">ğŸ” SEOä¼˜åŒ–</button>
                <button class="sidebar-btn" onclick="openModal('style')">ğŸ¨ æ ·å¼å®šåˆ¶</button>
            </div>

            <div class="sidebar-section">
                <h3>ğŸ“ æ’å…¥åª’ä½“</h3>
                <button class="sidebar-btn" onclick="openModal('image')">ğŸ–¼ï¸ æ’å…¥å›¾ç‰‡</button>
                <button class="sidebar-btn" onclick="openModal('video')">ğŸ¬ æ’å…¥è§†é¢‘</button>
                <button class="sidebar-btn" onclick="openModal('audio')">ğŸµ æ’å…¥éŸ³é¢‘</button>
                <button class="sidebar-btn" onclick="openModal('link')">ğŸ”— æ’å…¥é“¾æ¥</button>
            </div>

            <div class="sidebar-section">
                <h3>ğŸ”§ é«˜çº§åŠŸèƒ½</h3>
                <button class="sidebar-btn" onclick="openModal('code')">ğŸ’» æ’å…¥ä»£ç </button>
                <button class="sidebar-btn" onclick="openModal('table')">ğŸ“Š æ’å…¥è¡¨æ ¼</button>
                <button class="sidebar-btn" onclick="openModal('quote')">ğŸ’¬ æ’å…¥å¼•ç”¨</button>
                <button class="sidebar-btn" onclick="insertDivider()">â– æ’å…¥åˆ†éš”çº¿</button>
            </div>

            <div class="sidebar-section">
                <h3>ğŸ“š æ¨¡æ¿</h3>
                <button class="sidebar-btn" onclick="loadTemplate('blog')">ğŸ“° åšå®¢æ¨¡æ¿</button>
                <button class="sidebar-btn" onclick="loadTemplate('article')">ğŸ“„ æ–‡ç« æ¨¡æ¿</button>
                <button class="sidebar-btn" onclick="loadTemplate('tutorial')">ğŸ“– æ•™ç¨‹æ¨¡æ¿</button>
            </div>
        </aside>

        <main class="main-content">
            <div class="editor-wrapper">
                <input type="text" class="title-input" id="postTitle" placeholder="åœ¨æ­¤è¾“å…¥æ ‡é¢˜...">
                
                <div class="toolbar">
                    <div class="toolbar-group">
                        <button class="toolbar-btn" onclick="formatText('bold')" title="åŠ ç²—"><b>B</b></button>
                        <button class="toolbar-btn" onclick="formatText('italic')" title="æ–œä½“"><i>I</i></button>
                        <button class="toolbar-btn" onclick="formatText('underline')" title="ä¸‹åˆ’çº¿"><u>U</u></button>
                        <button class="toolbar-btn" onclick="formatText('strikeThrough')" title="åˆ é™¤çº¿"><s>S</s></button>
                    </div>

                    <div class="toolbar-group">
                        <button class="toolbar-btn" onclick="formatText('insertOrderedList')" title="æœ‰åºåˆ—è¡¨">1.</button>
                        <button class="toolbar-btn" onclick="formatText('insertUnorderedList')" title="æ— åºåˆ—è¡¨">â€¢</button>
                        <button class="toolbar-btn" onclick="formatText('indent')" title="å¢åŠ ç¼©è¿›">â†’</button>
                        <button class="toolbar-btn" onclick="formatText('outdent')" title="å‡å°‘ç¼©è¿›">â†</button>
                    </div>

                    <div class="toolbar-group">
                        <button class="toolbar-btn" onclick="formatText('justifyLeft')" title="å·¦å¯¹é½">â¬…</button>
                        <button class="toolbar-btn" onclick="formatText('justifyCenter')" title="å±…ä¸­">â†”</button>
                        <button class="toolbar-btn" onclick="formatText('justifyRight')" title="å³å¯¹é½">â¡</button>
                        <button class="toolbar-btn" onclick="formatText('justifyFull')" title="ä¸¤ç«¯å¯¹é½">â¬Œ</button>
                    </div>

                    <div class="toolbar-group">
                        <select class="toolbar-btn" onchange="changeHeading(this.value)" style="width: auto;">
                            <option value="">æ®µè½</option>
                            <option value="h1">æ ‡é¢˜ 1</option>
                            <option value="h2">æ ‡é¢˜ 2</option>
                            <option value="h3">æ ‡é¢˜ 3</option>
                            <option value="h4">æ ‡é¢˜ 4</option>
                            <option value="h5">æ ‡é¢˜ 5</option>
                            <option value="h6">æ ‡é¢˜ 6</option>
                        </select>
                    </div>

                    <div class="toolbar-group">
                        <input type="color" class="toolbar-btn" onchange="changeColor('foreColor', this.value)" title="æ–‡å­—é¢œè‰²" style="width: 40px; padding: 2px;">
                        <input type="color" class="toolbar-btn" onchange="changeColor('backColor', this.value)" title="èƒŒæ™¯é¢œè‰²" style="width: 40px; padding: 2px;">
                    </div>

                    <div class="toolbar-group">
                        <button class="toolbar-btn" onclick="formatText('undo')" title="æ’¤é”€">â†¶</button>
                        <button class="toolbar-btn" onclick="formatText('redo')" title="é‡åš">â†·</button>
                    </div>

                    <div class="toolbar-group">
                        <button class="toolbar-btn" onclick="clearFormatting()" title="æ¸…é™¤æ ¼å¼">âœ•</button>
                        <button class="toolbar-btn" onclick="viewSource()" title="æŸ¥çœ‹æºç ">&lt;/&gt;</button>
                    </div>
                </div>

                <div class="editor-content" id="editor" contenteditable="true" data-placeholder="å¼€å§‹ä¹¦å†™æ‚¨çš„å†…å®¹...">
                </div>
            </div>
        </main>
    </div>

    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âš™ï¸ å…¨å±€è®¾ç½®</h2>
                <button class="close-btn" onclick="closeModal('settings')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>ä½œè€…åç§°</label>
                    <input type="text" id="authorName" placeholder="è¾“å…¥ä½œè€…åç§°">
                </div>
                <div class="input-group">
                    <label>å‘å¸ƒæ—¥æœŸ</label>
                    <input type="date" id="publishDate">
                </div>
                <div class="input-group">
                    <label>åˆ†ç±»</label>
                    <input type="text" id="category" placeholder="æŠ€æœ¯, ç”Ÿæ´», æ—…è¡Œ...">
                </div>
                <div class="input-group">
                    <label>æ ‡ç­¾</label>
                    <input type="text" id="tags" placeholder="ç”¨é€—å·åˆ†éš”å¤šä¸ªæ ‡ç­¾">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="showAuthor" checked>
                    <label for="showAuthor">æ˜¾ç¤ºä½œè€…ä¿¡æ¯</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="showDate" checked>
                    <label for="showDate">æ˜¾ç¤ºå‘å¸ƒæ—¥æœŸ</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="enableComments" checked>
                    <label for="enableComments">å¯ç”¨è¯„è®ºåŠŸèƒ½</label>
                </div>
                <button class="btn btn-primary" onclick="closeModal('settings')">ä¿å­˜è®¾ç½®</button>
            </div>
        </div>
    </div>

    <!-- SEOæ¨¡æ€æ¡† -->
    <div class="modal" id="seoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ” SEOä¼˜åŒ–</h2>
                <button class="close-btn" onclick="closeModal('seo')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>é¡µé¢æ ‡é¢˜ (Title Tag)</label>
                    <input type="text" id="seoTitle" placeholder="60å­—ç¬¦ä»¥å†…" maxlength="60">
                </div>
                <div class="input-group">
                    <label>Metaæè¿° (Description)</label>
                    <textarea id="seoDescription" rows="3" placeholder="160å­—ç¬¦ä»¥å†…" maxlength="160"></textarea>
                </div>
                <div class="input-group">
                    <label>å…³é”®è¯ (Keywords)</label>
                    <input type="text" id="seoKeywords" placeholder="ç”¨é€—å·åˆ†éš”">
                </div>
                <div class="input-group">
                    <label>URLåˆ«å (Slug)</label>
                    <input type="text" id="seoSlug" placeholder="my-blog-post">
                </div>
                <button class="btn btn-primary" onclick="closeModal('seo')">ä¿å­˜SEOè®¾ç½®</button>
            </div>
        </div>
    </div>

    <!-- æ ·å¼å®šåˆ¶æ¨¡æ€æ¡† -->
    <div class="modal" id="styleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ¨ æ ·å¼å®šåˆ¶</h2>
                <button class="close-btn" onclick="closeModal('style')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>ä¸»é¢˜é£æ ¼</label>
                    <div class="style-selector">
                        <div class="style-option active" onclick="selectStyle(this, 'default')">é»˜è®¤</div>
                        <div class="style-option" onclick="selectStyle(this, 'minimal')">ç®€çº¦</div>
                        <div class="style-option" onclick="selectStyle(this, 'modern')">ç°ä»£</div>
                        <div class="style-option" onclick="selectStyle(this, 'classic')">ç»å…¸</div>
                    </div>
                </div>
                <div class="input-group">
                    <label>å­—ä½“ç³»åˆ—</label>
                    <select id="fontFamily">
                        <option value="Microsoft YaHei">å¾®è½¯é›…é»‘</option>
                        <option value="SimSun">å®‹ä½“</option>
                        <option value="SimHei">é»‘ä½“</option>
                        <option value="Arial">Arial</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Times New Roman">Times New Roman</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>å­—ä½“å¤§å°</label>
                    <div class="range-group">
                        <input type="range" id="fontSize" min="12" max="24" value="16" oninput="updateRangeValue(this, 'fontSizeValue')">
                        <span class="range-value" id="fontSizeValue">16px</span>
                    </div>
                </div>
                <div class="input-group">
                    <label>è¡Œé«˜</label>
                    <div class="range-group">
                        <input type="range" id="lineHeight" min="1" max="3" step="0.1" value="1.8" oninput="updateRangeValue(this, 'lineHeightValue')">
                        <span class="range-value" id="lineHeightValue">1.8</span>
                    </div>
                </div>
                <div class="input-group">
                    <label>å†…å®¹å®½åº¦</label>
                    <div class="range-group">
                        <input type="range" id="contentWidth" min="600" max="1200" step="50" value="900" oninput="updateRangeValue(this, 'contentWidthValue')">
                        <span class="range-value" id="contentWidthValue">900px</span>
                    </div>
                </div>
                <div class="input-group">
                    <label>ä¸»è‰²è°ƒ</label>
                    <div class="color-picker-group">
                        <input type="color" class="color-picker" id="primaryColor" value="#2271b1">
                        <span id="primaryColorValue">#2271b1</span>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="applyStyles()">åº”ç”¨æ ·å¼</button>
            </div>
        </div>
    </div>

    <!-- å›¾ç‰‡æ’å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ–¼ï¸ æ’å…¥å›¾ç‰‡</h2>
                <button class="close-btn" onclick="closeModal('image')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>å›¾ç‰‡URLç›´é“¾</label>
                    <input type="url" id="imageUrl" placeholder="https://example.com/image.jpg">
                </div>
                <div class="input-group">
                    <label>å›¾ç‰‡æè¿° (Alt Text)</label>
                    <input type="text" id="imageAlt" placeholder="å›¾ç‰‡æè¿°æ–‡å­—">
                </div>
                <div class="input-group">
                    <label>å›¾ç‰‡å®½åº¦</label>
                    <input type="text" id="imageWidth" placeholder="ä¾‹å¦‚: 100%, 500px, auto">
                </div>
                <div class="input-group">
                    <label>å›¾ç‰‡å¯¹é½</label>
                    <select id="imageAlign">
                        <option value="none">æ— </option>
                        <option value="left">å·¦å¯¹é½</option>
                        <option value="center">å±…ä¸­</option>
                        <option value="right">å³å¯¹é½</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="insertImage()">æ’å…¥å›¾ç‰‡</button>
            </div>
        </div>
    </div>

    <!-- è§†é¢‘æ’å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="videoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ¬ æ’å…¥è§†é¢‘</h2>
                <button class="close-btn" onclick="closeModal('video')">Ã—</button>
            </div>
            <div class="tab-group">
                <button class="tab-btn active" onclick="switchTab('videoUrl')">è§†é¢‘URL</button>
                <button class="tab-btn" onclick="switchTab('videoEmbed')">åµŒå…¥ä»£ç </button>
            </div>
            <div class="tab-content active" id="videoUrlTab">
                <div class="settings-grid">
                    <div class="input-group">
                        <label>è§†é¢‘URLç›´é“¾</label>
                        <input type="url" id="videoUrl" placeholder="https://example.com/video.mp4">
                    </div>
                    <div class="input-group">
                        <label>è§†é¢‘å®½åº¦</label>
                        <input type="text" id="videoWidth" placeholder="ä¾‹å¦‚: 100%, 640px" value="100%">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="videoControls" checked>
                        <label for="videoControls">æ˜¾ç¤ºæ§åˆ¶æ </label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="videoAutoplay">
                        <label for="videoAutoplay">è‡ªåŠ¨æ’­æ”¾</label>
                    </div>
                    <button class="btn btn-primary" onclick="insertVideo()">æ’å…¥è§†é¢‘</button>
                </div>
            </div>
            <div class="tab-content" id="videoEmbedTab">
                <div class="settings-grid">
                    <div class="input-group">
                        <label>åµŒå…¥ä»£ç  (iframe/embed)</label>
                        <textarea id="videoEmbed" rows="4" placeholder="ç²˜è´´YouTubeã€Bilibiliç­‰å¹³å°çš„åµŒå…¥ä»£ç "></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="insertVideoEmbed()">æ’å…¥åµŒå…¥è§†é¢‘</button>
                </div>
            </div>
        </div>
    </div>

    <!-- éŸ³é¢‘æ’å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="audioModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸµ æ’å…¥éŸ³é¢‘</h2>
                <button class="close-btn" onclick="closeModal('audio')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>éŸ³é¢‘URLç›´é“¾</label>
                    <input type="url" id="audioUrl" placeholder="https://example.com/audio.mp3">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="audioControls" checked>
                    <label for="audioControls">æ˜¾ç¤ºæ§åˆ¶æ </label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="audioAutoplay">
                    <label for="audioAutoplay">è‡ªåŠ¨æ’­æ”¾</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="audioLoop">
                    <label for="audioLoop">å¾ªç¯æ’­æ”¾</label>
                </div>
                <button class="btn btn-primary" onclick="insertAudio()">æ’å…¥éŸ³é¢‘</button>
            </div>
        </div>
    </div>

    <!-- é“¾æ¥æ’å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="linkModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”— æ’å…¥é“¾æ¥</h2>
                <button class="close-btn" onclick="closeModal('link')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>é“¾æ¥URL</label>
                    <input type="url" id="linkUrl" placeholder="https://example.com">
                </div>
                <div class="input-group">
                    <label>é“¾æ¥æ–‡æœ¬</label>
                    <input type="text" id="linkText" placeholder="ç‚¹å‡»è¿™é‡Œ">
                </div>
                <div class="input-group">
                    <label>é“¾æ¥æ ‡é¢˜ (Title)</label>
                    <input type="text" id="linkTitle" placeholder="é¼ æ ‡æ‚¬åœæ˜¾ç¤ºçš„æ–‡å­—">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="linkNewTab" checked>
                    <label for="linkNewTab">åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€</label>
                </div>
                <button class="btn btn-primary" onclick="insertLink()">æ’å…¥é“¾æ¥</button>
            </div>
        </div>
    </div>

    <!-- ä»£ç æ’å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="codeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’» æ’å…¥ä»£ç </h2>
                <button class="close-btn" onclick="closeModal('code')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>ç¼–ç¨‹è¯­è¨€</label>
                    <select id="codeLanguage">
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                        <option value="java">Java</option>
                        <option value="cpp">C++</option>
                        <option value="php">PHP</option>
                        <option value="sql">SQL</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>ä»£ç å†…å®¹</label>
                    <textarea id="codeContent" rows="10" placeholder="åœ¨æ­¤ç²˜è´´æˆ–è¾“å…¥ä»£ç ..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="insertCode()">æ’å…¥ä»£ç </button>
            </div>
        </div>
    </div>

    <!-- è¡¨æ ¼æ’å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="tableModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“Š æ’å…¥è¡¨æ ¼</h2>
                <button class="close-btn" onclick="closeModal('table')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>è¡Œæ•°</label>
                    <input type="number" id="tableRows" value="3" min="1" max="20">
                </div>
                <div class="input-group">
                    <label>åˆ—æ•°</label>
                    <input type="number" id="tableCols" value="3" min="1" max="10">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tableHeader" checked>
                    <label for="tableHeader">åŒ…å«è¡¨å¤´</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="tableBorder" checked>
                    <label for="tableBorder">æ˜¾ç¤ºè¾¹æ¡†</label>
                </div>
                <button class="btn btn-primary" onclick="insertTable()">æ’å…¥è¡¨æ ¼</button>
            </div>
        </div>
    </div>

    <!-- å¼•ç”¨æ’å…¥æ¨¡æ€æ¡† -->
    <div class="modal" id="quoteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’¬ æ’å…¥å¼•ç”¨</h2>
                <button class="close-btn" onclick="closeModal('quote')">Ã—</button>
            </div>
            <div class="settings-grid">
                <div class="input-group">
                    <label>å¼•ç”¨å†…å®¹</label>
                    <textarea id="quoteContent" rows="4" placeholder="è¾“å…¥å¼•ç”¨æ–‡å­—..."></textarea>
                </div>
                <div class="input-group">
                    <label>å¼•ç”¨æ¥æº (å¯é€‰)</label>
                    <input type="text" id="quoteAuthor" placeholder="ä½œè€…æˆ–å‡ºå¤„">
                </div>
                <button class="btn btn-primary" onclick="insertQuote()">æ’å…¥å¼•ç”¨</button>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥æç¤º -->
    <div class="notification" id="notification"></div>

    <script>
        // ç¼–è¾‘å™¨åŠŸèƒ½
        function formatText(command, value = null) {
            document.execCommand(command, false, value);
            document.getElementById('editor').focus();
        }

        function changeHeading(tag) {
            if (tag) {
                document.execCommand('formatBlock', false, tag);
            } else {
                document.execCommand('formatBlock', false, 'p');
            }
            document.getElementById('editor').focus();
        }

        function changeColor(command, color) {
            document.execCommand(command, false, color);
            document.getElementById('editor').focus();
        }

        function clearFormatting() {
            document.execCommand('removeFormat', false, null);
            document.getElementById('editor').focus();
        }

        // æ¨¡æ€æ¡†æ§åˆ¶
        function openModal(modalName) {
            document.getElementById(modalName + 'Modal').classList.add('active');
        }

        function closeModal(modalName) {
            document.getElementById(modalName + 'Modal').classList.remove('active');
        }

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        // æ ·å¼é€‰æ‹©
        function selectStyle(element, style) {
            document.querySelectorAll('.style-option').forEach(opt => {
                opt.classList.remove('active');
            });
            element.classList.add('active');
        }

        // èŒƒå›´æ»‘å—æ›´æ–°
        function updateRangeValue(input, targetId) {
            const value = input.value;
            const suffix = input.id === 'lineHeight' ? '' : 'px';
            document.getElementById(targetId).textContent = value + suffix;
        }

        // æ’å…¥å›¾ç‰‡
        function insertImage() {
            const url = document.getElementById('imageUrl').value;
            const alt = document.getElementById('imageAlt').value || 'å›¾ç‰‡';
            const width = document.getElementById('imageWidth').value || 'auto';
            const align = document.getElementById('imageAlign').value;
            
            if (!url) {
                showNotification('è¯·è¾“å…¥å›¾ç‰‡URL', 'error');
                return;
            }
            
            let style = `width: ${width}; max-width: 100%; height: auto;`;
            if (align === 'center') {
                style += ' display: block; margin: 20px auto;';
            } else if (align === 'left') {
                style += ' float: left; margin: 10px 20px 10px 0;';
            } else if (align === 'right') {
                style += ' float: right; margin: 10px 0 10px 20px;';
            }
            
            const imgHtml = `<img src="${url}" alt="${alt}" style="${style}">`;
            document.execCommand('insertHTML', false, imgHtml);
            
            closeModal('image');
            showNotification('å›¾ç‰‡å·²æ’å…¥');
        }

        // æ’å…¥è§†é¢‘
        function insertVideo() {
            const url = document.getElementById('videoUrl').value;
            const width = document.getElementById('videoWidth').value || '100%';
            const controls = document.getElementById('videoControls').checked;
            const autoplay = document.getElementById('videoAutoplay').checked;
            
            if (!url) {
                showNotification('è¯·è¾“å…¥è§†é¢‘URL', 'error');
                return;
            }
            
            const videoHtml = `<video src="${url}" style="width: ${width}; max-width: 100%;" ${controls ? 'controls' : ''} ${autoplay ? 'autoplay' : ''}></video><br>`;
            document.execCommand('insertHTML', false, videoHtml);
            
            closeModal('video');
            showNotification('è§†é¢‘å·²æ’å…¥');
        }

        // æ’å…¥åµŒå…¥è§†é¢‘
        function insertVideoEmbed() {
            const embed = document.getElementById('videoEmbed').value;
            
            if (!embed) {
                showNotification('è¯·è¾“å…¥åµŒå…¥ä»£ç ', 'error');
                return;
            }
            
            document.execCommand('insertHTML', false, embed + '<br>');
            closeModal('video');
            showNotification('åµŒå…¥è§†é¢‘å·²æ’å…¥');
        }

        // æ’å…¥éŸ³é¢‘
        function insertAudio() {
            const url = document.getElementById('audioUrl').value;
            const controls = document.getElementById('audioControls').checked;
            const autoplay = document.getElementById('audioAutoplay').checked;
            const loop = document.getElementById('audioLoop').checked;
            
            if (!url) {
                showNotification('è¯·è¾“å…¥éŸ³é¢‘URL', 'error');
                return;
            }
            
            const audioHtml = `<audio src="${url}" ${controls ? 'controls' : ''} ${autoplay ? 'autoplay' : ''} ${loop ? 'loop' : ''} style="width: 100%; max-width: 500px;"></audio><br>`;
            document.execCommand('insertHTML', false, audioHtml);
            
            closeModal('audio');
            showNotification('éŸ³é¢‘å·²æ’å…¥');
        }

        // æ’å…¥é“¾æ¥
        function insertLink() {
            const url = document.getElementById('linkUrl').value;
            const text = document.getElementById('linkText').value || url;
            const title = document.getElementById('linkTitle').value;
            const newTab = document.getElementById('linkNewTab').checked;
            
            if (!url) {
                showNotification('è¯·è¾“å…¥é“¾æ¥URL', 'error');
                return;
            }
            
            const linkHtml = `<a href="${url}" ${title ? `title="${title}"` : ''} ${newTab ? 'target="_blank"' : ''}>${text}</a>`;
            document.execCommand('insertHTML', false, linkHtml);
            
            closeModal('link');
            showNotification('é“¾æ¥å·²æ’å…¥');
        }

        // æ’å…¥ä»£ç 
        function insertCode() {
            const language = document.getElementById('codeLanguage').value;
            const content = document.getElementById('codeContent').value;
            
            if (!content) {
                showNotification('è¯·è¾“å…¥ä»£ç å†…å®¹', 'error');
                return;
            }
            
            const codeHtml = `<pre style="background: #282c34; color: #abb2bf; padding: 16px; border-radius: 4px; overflow-x: auto; font-family: 'Courier New', monospace;"><code class="language-${language}">${escapeHtml(content)}</code></pre><br>`;
            document.execCommand('insertHTML', false, codeHtml);
            
            closeModal('code');
            showNotification('ä»£ç å·²æ’å…¥');
        }

        // æ’å…¥è¡¨æ ¼
        function insertTable() {
            const rows = parseInt(document.getElementById('tableRows').value);
            const cols = parseInt(document.getElementById('tableCols').value);
            const hasHeader = document.getElementById('tableHeader').checked;
            const hasBorder = document.getElementById('tableBorder').checked;
            
            let tableHtml = `<table style="width: 100%; border-collapse: collapse; margin: 20px 0; ${hasBorder ? 'border: 1px solid #ddd;' : ''}">`;
            
            for (let i = 0; i < rows; i++) {
                tableHtml += '<tr>';
                for (let j = 0; j < cols; j++) {
                    const tag = (i === 0 && hasHeader) ? 'th' : 'td';
                    const style = `padding: 12px; ${hasBorder ? 'border: 1px solid #ddd;' : ''} ${(i === 0 && hasHeader) ? 'background: #f0f0f1; font-weight: 600;' : ''}`;
                    tableHtml += `<${tag} style="${style}">${(i === 0 && hasHeader) ? `åˆ—${j + 1}` : '&nbsp;'}</${tag}>`;
                }
                tableHtml += '</tr>';
            }
            
            tableHtml += '</table><br>';
            document.execCommand('insertHTML', false, tableHtml);
            
            closeModal('table');
            showNotification('è¡¨æ ¼å·²æ’å…¥');
        }

        // æ’å…¥å¼•ç”¨
        function insertQuote() {
            const content = document.getElementById('quoteContent').value;
            const author = document.getElementById('quoteAuthor').value;
            
            if (!content) {
                showNotification('è¯·è¾“å…¥å¼•ç”¨å†…å®¹', 'error');
                return;
            }
            
            const quoteHtml = `<blockquote style="border-left: 4px solid #2271b1; padding: 16px 20px; margin: 20px 0; background: #f9f9f9; font-style: italic;">${content}${author ? `<footer style="margin-top: 10px; font-size: 14px; color: #646970;">â€” ${author}</footer>` : ''}</blockquote><br>`;
            document.execCommand('insertHTML', false, quoteHtml);
            
            closeModal('quote');
            showNotification('å¼•ç”¨å·²æ’å…¥');
        }

        // æ’å…¥åˆ†éš”çº¿
        function insertDivider() {
            document.execCommand('insertHTML', false, '<hr style="border: none; border-top: 2px solid #ddd; margin: 30px 0;"><br>');
            showNotification('åˆ†éš”çº¿å·²æ’å…¥');
        }

        // åº”ç”¨æ ·å¼
        function applyStyles() {
            const editor = document.getElementById('editor');
            const wrapper = document.querySelector('.editor-wrapper');
            const fontFamily = document.getElementById('fontFamily').value;
            const fontSize = document.getElementById('fontSize').value;
            const lineHeight = document.getElementById('lineHeight').value;
            const contentWidth = document.getElementById('contentWidth').value;
            
            editor.style.fontFamily = fontFamily;
            editor.style.fontSize = fontSize + 'px';
            editor.style.lineHeight = lineHeight;
            wrapper.style.maxWidth = contentWidth + 'px';
            
            closeModal('style');
            showNotification('æ ·å¼å·²åº”ç”¨');
        }

        // æŸ¥çœ‹æºç 
        let isSourceView = false;
        function viewSource() {
            const editor = document.getElementById('editor');
            
            if (!isSourceView) {
                const html = editor.innerHTML;
                editor.textContent = html;
                editor.style.fontFamily = 'monospace';
                editor.style.background = '#282c34';
                editor.style.color = '#abb2bf';
                isSourceView = true;
            } else {
                const text = editor.textContent;
                editor.innerHTML = text;
                editor.style.fontFamily = '';
                editor.style.background = '';
                editor.style.color = '';
                isSourceView = false;
            }
        }

        // é¢„è§ˆåŠŸèƒ½
        let isPreview = false;
        function togglePreview() {
            const editor = document.getElementById('editor');
            const toolbar = document.querySelector('.toolbar');
            
            if (!isPreview) {
                editor.contentEditable = 'false';
                editor.style.background = '#f9f9f9';
                toolbar.style.display = 'none';
                isPreview = true;
                showNotification('é¢„è§ˆæ¨¡å¼');
            } else {
                editor.contentEditable = 'true';
                editor.style.background = '';
                toolbar.style.display = 'flex';
                isPreview = false;
                showNotification('ç¼–è¾‘æ¨¡å¼');
            }
        }

        // ä¿å­˜è‰ç¨¿
        function saveDraft() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('editor').innerHTML;
            
            const draft = {
                title: title,
                content: content,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('blogDraft', JSON.stringify(draft));
            showNotification('è‰ç¨¿å·²ä¿å­˜');
        }

        // åŠ è½½è‰ç¨¿
        function loadDraft() {
            const draft = localStorage.getItem('blogDraft');
            if (draft) {
                const data = JSON.parse(draft);
                if (confirm('æ£€æµ‹åˆ°æœ‰ä¿å­˜çš„è‰ç¨¿,æ˜¯å¦åŠ è½½?')) {
                    document.getElementById('postTitle').value = data.title;
                    document.getElementById('editor').innerHTML = data.content;
                    showNotification('è‰ç¨¿å·²åŠ è½½');
                }
            }
        }

        // åŠ è½½æ¨¡æ¿
        function loadTemplate(type) {
            const templates = {
                blog: {
                    title: 'æˆ‘çš„åšå®¢æ–‡ç« æ ‡é¢˜',
                    content: '<h2>å¼•è¨€</h2><p>åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„å¼•è¨€...</p><h2>æ­£æ–‡</h2><p>åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„æ­£æ–‡å†…å®¹...</p><h2>æ€»ç»“</h2><p>åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„æ€»ç»“...</p>'
                },
                article: {
                    title: 'ä¸“ä¸šæ–‡ç« æ ‡é¢˜',
                    content: '<h1>æ–‡ç« æ ‡é¢˜</h1><p><strong>æ‘˜è¦ï¼š</strong>åœ¨è¿™é‡Œå†™ä¸‹æ–‡ç« æ‘˜è¦...</p><h2>ç¬¬ä¸€ç« èŠ‚</h2><p>ç« èŠ‚å†…å®¹...</p><h2>ç¬¬äºŒç« èŠ‚</h2><p>ç« èŠ‚å†…å®¹...</p><h2>ç»“è®º</h2><p>æ–‡ç« ç»“è®º...</p>'
                },
                tutorial: {
                    title: 'æ•™ç¨‹ï¼šå¦‚ä½•åšæŸäº‹',
                    content: '<h1>æ•™ç¨‹æ ‡é¢˜</h1><p>æœ¬æ•™ç¨‹å°†æ•™ä½ å¦‚ä½•...</p><h2>å‡†å¤‡å·¥ä½œ</h2><ul><li>å‡†å¤‡äº‹é¡¹1</li><li>å‡†å¤‡äº‹é¡¹2</li></ul><h2>æ­¥éª¤1</h2><p>è¯¦ç»†è¯´æ˜...</p><h2>æ­¥éª¤2</h2><p>è¯¦ç»†è¯´æ˜...</p><h2>æ€»ç»“</h2><p>æ­å–œä½ å®Œæˆäº†æœ¬æ•™ç¨‹!</p>'
                }
            };
            
            if (templates[type]) {
                document.getElementById('postTitle').value = templates[type].title;
                document.getElementById('editor').innerHTML = templates[type].content;
                showNotification('æ¨¡æ¿å·²åŠ è½½');
            }
        }

        // å¯¼å‡ºHTML
        function exportHTML() {
            const title = document.getElementById('postTitle').value || 'æœªå‘½åæ–‡ç« ';
            const content = document.getElementById('editor').innerHTML;
            const author = document.getElementById('authorName').value || 'åŒ¿åä½œè€…';
            const date = document.getElementById('publishDate').value || new Date().toLocaleDateString('zh-CN');
            const fontFamily = document.getElementById('fontFamily').value || 'Microsoft YaHei';
            const fontSize = document.getElementById('fontSize').value || '16';
            const lineHeight = document.getElementById('lineHeight').value || '1.8';
            
            const html = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="${author}">
    <meta name="description" content="${document.getElementById('seoDescription').value || title}">
    <meta name="keywords" content="${document.getElementById('seoKeywords').value || ''}">
    <title>${document.getElementById('seoTitle').value || title}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: '${fontFamily}', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: ${fontSize}px;
            line-height: ${lineHeight};
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .article-header {
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .article-title {
            font-size: 36px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 16px;
            line-height: 1.3;
        }
        .article-meta {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
        }
        .article-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .article-content {
            color: #333;
        }
        .article-content h1,
        .article-content h2,
        .article-content h3,
        .article-content h4,
        .article-content h5,
        .article-content h6 {
            margin: 24px 0 16px;
            font-weight: 600;
            line-height: 1.3;
            color: #1a1a1a;
        }
        .article-content h1 { font-size: 32px; }
        .article-content h2 { font-size: 28px; }
        .article-content h3 { font-size: 24px; }
        .article-content p {
            margin: 16px 0;
        }
        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin: 20px 0;
        }
        .article-content a {
            color: #2271b1;
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: border-color 0.2s;
        }
        .article-content a:hover {
            border-bottom-color: #2271b1;
        }
        .article-content ul,
        .article-content ol {
            margin: 16px 0;
            padding-left: 30px;
        }
        .article-content li {
            margin: 8px 0;
        }
        .article-content blockquote {
            border-left: 4px solid #2271b1;
            padding: 16px 20px;
            margin: 20px 0;
            background: #f9f9f9;
            font-style: italic;
        }
        .article-content pre {
            background: #282c34;
            color: #abb2bf;
            padding: 16px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .article-content code {
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .article-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .article-content table td,
        .article-content table th {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        .article-content table th {
            background: #f0f0f1;
            font-weight: 600;
        }
        .article-footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 20px;
            }
            .article-title {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <article>
            <header class="article-header">
                <h1 class="article-title">${title}</h1>
                <div class="article-meta">
                    ${document.getElementById('showAuthor').checked ? `<span>âœï¸ ${author}</span>` : ''}
                    ${document.getElementById('showDate').checked ? `<span>ğŸ“… ${date}</span>` : ''}
                </div>
            </header>
            <div class="article-content">
                ${content}
            </div>
            <footer class="article-footer">
                <p>Â© ${new Date().getFullYear()} ${author}. All rights reserved.</p>
            </footer>
        </article>
    </div>
</body>
</html>`;
            
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = (title || 'article') + '.html';
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('HTMLæ–‡ä»¶å·²å¯¼å‡º');
        }

        // é€šçŸ¥æç¤º
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'error' ? '#d63638' : '#00a32a';
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // HTMLè½¬ä¹‰
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥è‰ç¨¿
        window.addEventListener('load', () => {
            loadDraft();
            // è®¾ç½®é»˜è®¤æ—¥æœŸ
            document.getElementById('publishDate').valueAsDate = new Date();
            // ç›‘å¬é¢œè‰²é€‰æ‹©å™¨
            document.getElementById('primaryColor').addEventListener('input', (e) => {
                document.getElementById('primaryColorValue').textContent = e.target.value;
            });
        });

        // è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
        setInterval(() => {
            const content = document.getElementById('editor').innerHTML;
            if (content.trim().length > 0) {
                saveDraft();
            }
        }, 60000); // æ¯åˆ†é’Ÿè‡ªåŠ¨ä¿å­˜ä¸€æ¬¡

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key.toLowerCase()) {
                    case 'b':
                        e.preventDefault();
                        formatText('bold');
                        break;
                    case 'i':
                        e.preventDefault();
                        formatText('italic');
                        break;
                    case 'u':
                        e.preventDefault();
                        formatText('underline');
                        break;
                    case 's':
                        e.preventDefault();
                        saveDraft();
                        break;
                }
            }
        });
    </script>
</body>
</html>
